import{u as D}from"./useView.b2a319db.js";import{d as L,a as V,a0 as _,r as i,y as w,t as p,A as F,F as t,G as a,I as r,H as s,P as H,z as S,u as f,f as d}from"./vlib.73c86f1d.js";import E from"./mail-template-add-or-update.280c3ce2.js";import U from"./mail-template-config.ad52a299.js";import z from"./mail-template-send.e3a4ef6d.js";import{_ as A}from"./index.bc4fd47c.js";import"./monacoeditor.d62c48b5.js";/* empty css                   */import"./quill.942ff23b.js";import"./lodash.58534d7e.js";import"./lib.e5e0e84e.js";const R=L({components:{AddOrUpdate:E,Config:U,Send:z},setup(){const e=V({getDataListURL:"/sys/mailtemplate/page",getDataListIsPage:!0,deleteURL:"/sys/mailtemplate",deleteIsBatch:!0,dataForm:{name:""},configVisible:!1,sendVisible:!1});return{...D(e),..._(e)}},methods:{configHandle(){this.configVisible=!0,this.$nextTick(()=>{this.$refs.config.init()})},sendHandle(e){this.sendVisible=!0,this.$nextTick(()=>{this.$refs.send.dataForm.id=e,this.$refs.send.init()})}}}),B={class:"mod-message__mail-template"};function O(e,n,j,T,I,N){const c=i("el-input"),u=i("el-form-item"),o=i("el-button"),h=i("el-form"),m=i("el-table-column"),C=i("el-table"),$=i("el-pagination"),b=i("add-or-update"),y=i("config"),v=i("send"),k=w("loading");return p(),F("div",B,[t(h,{inline:!0,model:e.dataForm,onKeyup:n[5]||(n[5]=H(l=>e.getDataList(),["enter"]))},{default:a(()=>[t(u,null,{default:a(()=>[t(c,{modelValue:e.dataForm.name,"onUpdate:modelValue":n[0]||(n[0]=l=>e.dataForm.name=l),placeholder:e.$t("mail.name"),clearable:""},null,8,["modelValue","placeholder"])]),_:1}),t(u,null,{default:a(()=>[t(o,{onClick:n[1]||(n[1]=l=>e.getDataList())},{default:a(()=>[r(s(e.$t("query")),1)]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(o,{type:"primary",onClick:n[2]||(n[2]=l=>e.addOrUpdateHandle())},{default:a(()=>[r(s(e.$t("add")),1)]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(o,{type:"primary",onClick:n[3]||(n[3]=l=>e.configHandle())},{default:a(()=>[r(s(e.$t("mail.config")),1)]),_:1})]),_:1}),t(u,null,{default:a(()=>[t(o,{type:"danger",onClick:n[4]||(n[4]=l=>e.deleteHandle())},{default:a(()=>[r(s(e.$t("deleteBatch")),1)]),_:1})]),_:1})]),_:1},8,["model"]),S((p(),f(C,{data:e.dataList,border:"",onSelectionChange:e.dataListSelectionChangeHandle,onSortChange:e.dataListSortChangeHandle,style:{width:"100%"}},{default:a(()=>[t(m,{type:"selection","header-align":"center",align:"center",width:"50"}),t(m,{prop:"name",label:e.$t("mail.name"),"header-align":"center",align:"center"},null,8,["label"]),t(m,{prop:"subject",label:e.$t("mail.subject"),"header-align":"center",align:"center"},null,8,["label"]),t(m,{prop:"createDate",label:e.$t("mail.createDate"),sortable:"custom","header-align":"center",align:"center",width:"180"},null,8,["label"]),t(m,{label:e.$t("handle"),fixed:"right","header-align":"center",align:"center",width:"180"},{default:a(l=>[t(o,{type:"primary",link:"",onClick:g=>e.addOrUpdateHandle(l.row.id)},{default:a(()=>[r(s(e.$t("update")),1)]),_:2},1032,["onClick"]),t(o,{type:"primary",link:"",onClick:g=>e.sendHandle(l.row.id)},{default:a(()=>[r(s(e.$t("mail.send")),1)]),_:2},1032,["onClick"]),t(o,{type:"primary",link:"",onClick:g=>e.deleteHandle(l.row.id)},{default:a(()=>[r(s(e.$t("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange","onSortChange"])),[[k,e.dataListLoading]]),t($,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),d(" \u5F39\u7A97, \u65B0\u589E / \u4FEE\u6539 "),e.addOrUpdateVisible?(p(),f(b,{key:0,ref:"addOrUpdate",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):d("v-if",!0),d(" \u5F39\u7A97, \u90AE\u4EF6\u914D\u7F6E "),e.configVisible?(p(),f(y,{key:1,ref:"config"},null,512)):d("v-if",!0),d(" \u5F39\u7A97, \u53D1\u9001\u90AE\u4EF6 "),e.sendVisible?(p(),f(v,{key:2,ref:"send",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):d("v-if",!0)])}var x=A(R,[["render",O],["__file","/Users/luochen/project17/taie-sword/taie-admin-vue/src/views/message/mail-template.vue"]]);export{x as default};
