import{d as g,a as $,r,t as b,u as v,G as o,F as l,I as d,H as n,P as F}from"./vlib.73c86f1d.js";import{_ as h,j as V,b as u}from"./index.bc4fd47c.js";import"./monacoeditor.d62c48b5.js";import"./lodash.58534d7e.js";import"./lib.e5e0e84e.js";const w=g({setup(){return $({visible:!1,dataForm:{smtp:"",port:"",username:"",password:""}})},computed:{dataRule(){return{smtp:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],port:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],username:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],password:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}]}}},created(){this.dataFormSubmitHandle=V(this.dataFormSubmitHandle)},methods:{init(){this.visible=!0,this.$nextTick(()=>{this.$refs.dataFormRef.resetFields(),this.getInfo()})},getInfo(){u.get("/sys/mailtemplate/config").then(e=>{if(e.code!==0)return this.$message.error(e.msg);this.dataForm=e.data})},dataFormSubmitHandle(){this.$refs.dataFormRef.validate(e=>{if(!e)return!1;u.post("/sys/mailtemplate/saveConfig",this.dataForm).then(a=>{if(a.code!==0)return this.$message.error(a.msg);this.$message({message:this.$t("prompt.success"),type:"success",duration:500,onClose:()=>{this.visible=!1,this.$emit("refreshDataList")}})})})}}});function q(e,a,y,C,S,k){const s=r("el-input"),i=r("el-form-item"),p=r("el-form"),m=r("el-button"),f=r("el-dialog");return b(),v(f,{modelValue:e.visible,"onUpdate:modelValue":a[7]||(a[7]=t=>e.visible=t),title:e.$t("mail.config"),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:o(()=>[l(m,{onClick:a[5]||(a[5]=t=>e.visible=!1)},{default:o(()=>[d(n(e.$t("cancel")),1)]),_:1}),l(m,{type:"primary",onClick:a[6]||(a[6]=t=>e.dataFormSubmitHandle())},{default:o(()=>[d(n(e.$t("confirm")),1)]),_:1})]),default:o(()=>[l(p,{model:e.dataForm,rules:e.dataRule,ref:"dataFormRef",onKeyup:a[4]||(a[4]=F(t=>e.dataFormSubmitHandle(),["enter"])),"label-width":"120px"},{default:o(()=>[l(i,{prop:"smtp",label:e.$t("mail.config")},{default:o(()=>[l(s,{modelValue:e.dataForm.smtp,"onUpdate:modelValue":a[0]||(a[0]=t=>e.dataForm.smtp=t),placeholder:e.$t("mail.config")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(i,{prop:"port",label:e.$t("mail.port")},{default:o(()=>[l(s,{modelValue:e.dataForm.port,"onUpdate:modelValue":a[1]||(a[1]=t=>e.dataForm.port=t),placeholder:e.$t("mail.port")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(i,{prop:"username",label:e.$t("mail.username")},{default:o(()=>[l(s,{modelValue:e.dataForm.username,"onUpdate:modelValue":a[2]||(a[2]=t=>e.dataForm.username=t),placeholder:e.$t("mail.username")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(i,{prop:"password",label:e.$t("mail.password")},{default:o(()=>[l(s,{modelValue:e.dataForm.password,"onUpdate:modelValue":a[3]||(a[3]=t=>e.dataForm.password=t),placeholder:e.$t("mail.password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}var I=h(w,[["render",q],["__file","/Users/luochen/project17/taie-sword/taie-admin-vue/src/views/message/mail-template-config.vue"]]);export{I as default};
