import{u as b}from"./useView.b2a319db.js";import{d as v,a as $,a0 as w,r as i,y as C,t as d,A as S,F as t,G as n,I as r,H as s,P as D,z as L,u as p}from"./vlib.73c86f1d.js";import{_ as k,r as z,b as T}from"./index.bc4fd47c.js";import"./monacoeditor.d62c48b5.js";import"./lodash.58534d7e.js";import"./lib.e5e0e84e.js";const H=v({setup(){const e=$({getDataListURL:"/sys/notice/mynotice/page",getDataListIsPage:!0,dataForm:{noticeType:""}});return{...b(e),...w(e)}},methods:{viewHandle(e){const a={path:"/notice/notice-user-view",query:{id:e.id,_mt:this.$t("notice.view2")}};e.readStatus===0&&this.updateReadStatus(e.id),z(a)},updateReadStatus(e){T.put("/sys/notice/mynotice/read/"+e).then(a=>{if(a.code!==0)return this.$message.error(a.msg)})}}}),V={class:"mod-demo__sysnoticeuser"};function F(e,a,N,R,U,B){const g=i("ren-select"),c=i("el-form-item"),u=i("el-button"),h=i("el-form"),l=i("el-table-column"),m=i("el-tag"),y=i("el-table"),f=i("el-pagination"),_=C("loading");return d(),S("div",V,[t(h,{inline:!0,model:e.dataForm,onKeyup:a[2]||(a[2]=D(o=>e.getDataList(),["enter"]))},{default:n(()=>[t(c,null,{default:n(()=>[t(g,{modelValue:e.dataForm.noticeType,"onUpdate:modelValue":a[0]||(a[0]=o=>e.dataForm.noticeType=o),"dict-type":"notice_type",placeholder:e.$t("notice.type")},null,8,["modelValue","placeholder"])]),_:1}),t(c,null,{default:n(()=>[t(u,{onClick:a[1]||(a[1]=o=>e.getDataList())},{default:n(()=>[r(s(e.$t("query")),1)]),_:1})]),_:1})]),_:1},8,["model"]),L((d(),p(y,{data:e.dataList,border:"",onSelectionChange:e.dataListSelectionChangeHandle,style:{width:"100%"}},{default:n(()=>[t(l,{type:"selection","header-align":"center",align:"center",width:"50"}),t(l,{prop:"title",label:e.$t("notice.title"),"header-align":"center",align:"center"},null,8,["label"]),t(l,{prop:"noticeType",label:e.$t("notice.type"),"header-align":"center",align:"center",width:"150"},{default:n(o=>[r(s(e.getDictLabel("notice_type",o.row.noticeType)),1)]),_:1},8,["label"]),t(l,{prop:"senderName",label:e.$t("notice.senderName"),"header-align":"center",align:"center",width:"150"},null,8,["label"]),t(l,{prop:"senderDate",label:e.$t("notice.senderDate"),"header-align":"center",align:"center",width:"170"},null,8,["label"]),t(l,{prop:"readStatus",label:e.$t("notice.readStatus"),"header-align":"center",align:"center",width:"130"},{default:n(o=>[o.row.readStatus===0?(d(),p(m,{key:0,type:"danger"},{default:n(()=>[r(s(e.$t("notice.readStatus0")),1)]),_:1})):(d(),p(m,{key:1,type:"success"},{default:n(()=>[r(s(e.$t("notice.readStatus1")),1)]),_:1}))]),_:1},8,["label"]),t(l,{label:e.$t("handle"),fixed:"right","header-align":"center",align:"center",width:"150"},{default:n(o=>[t(u,{type:"primary",link:"",onClick:P=>e.viewHandle(o.row)},{default:n(()=>[r(s(e.$t("notice.view")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange"])),[[_,e.dataListLoading]]),t(f,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}var G=k(H,[["render",F],["__file","/Users/luochen/project17/taie-sword/taie-admin-vue/src/views/notice/notice-user.vue"]]);export{G as default};
