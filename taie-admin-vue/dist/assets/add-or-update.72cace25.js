import{d as C,e as f,a as V,O as F,r,t as B,A as k,F as a,G as o,I as b}from"./vlib.73c86f1d.js";import{_ as D,j as E,b as g}from"./index.bc4fd47c.js";import{M as j}from"./index.c53cfe2f.js";import"./monacoeditor.d62c48b5.js";import"./lodash.58534d7e.js";import"./lib.e5e0e84e.js";const y=C({components:{MonacoEditor:j},setup(){const e=f(!1),t=f(!1),i=f(),u=V({id:"",name:"",identification:"",code:"",remark:""});return{visible:e,submitting:t,dataFormRef:i,dataForm:u,dataRule:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"}],identification:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u8BC6",trigger:"blur"}],code:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EE3\u7801",trigger:"blur"}]}}},created(){this.dataFormSubmitHandle=E(this.dataFormSubmitHandle)},methods:{init(){this.visible=!0,this.$nextTick(()=>{var e;(e=this.dataFormRef)==null||e.resetFields(),this.dataForm.id?this.getInfo():(this.dataForm.name="",this.dataForm.identification="",this.dataForm.code="",this.dataForm.remark="")})},getInfo(){g.get(`/jsCode/${this.dataForm.id}`).then(e=>{if(e.code!==0)return F.error(e.msg);Object.assign(this.dataForm,e.data)})},dataFormSubmitHandle(e){var t;(t=this.dataFormRef)==null||t.validate(i=>{if(!i)return!1;this.submitting=!0,(this.dataForm.id?g.post("/jsCode/update",this.dataForm):g.post("/jsCode/save",this.dataForm)).then(l=>{if(this.submitting=!1,l.code!==0)return F.error(l.msg);F({message:"\u64CD\u4F5C\u6210\u529F",type:"success",duration:500,onClose:()=>{e&&(this.visible=!1),this.$emit("refreshDataList")}})}).catch(()=>{this.submitting=!1})})}}}),$={class:"js-code-editor"};function w(e,t,i,u,l,U){const n=r("el-input"),s=r("el-form-item"),m=r("el-col"),c=r("el-row"),v=r("monaco-editor"),_=r("el-form"),p=r("el-button"),h=r("el-dialog");return B(),k("div",$,[a(h,{modelValue:e.visible,"onUpdate:modelValue":t[7]||(t[7]=d=>e.visible=d),title:e.dataForm.id?"\u7F16\u8F91":"\u65B0\u589E","close-on-click-modal":!1,"close-on-press-escape":!1,fullscreen:!0},{footer:o(()=>[a(p,{onClick:t[4]||(t[4]=d=>e.visible=!1)},{default:o(()=>t[8]||(t[8]=[b("\u53D6\u6D88")])),_:1}),a(p,{type:"primary",onClick:t[5]||(t[5]=d=>e.dataFormSubmitHandle(!0)),loading:e.submitting},{default:o(()=>t[9]||(t[9]=[b("\u4FDD\u5B58\u9000\u51FA")])),_:1},8,["loading"]),a(p,{type:"primary",onClick:t[6]||(t[6]=d=>e.dataFormSubmitHandle(!1)),loading:e.submitting},{default:o(()=>t[10]||(t[10]=[b("\u4FDD\u5B58")])),_:1},8,["loading"])]),default:o(()=>[a(_,{model:e.dataForm,rules:e.dataRule,ref:"dataFormRef","label-width":"100px",size:"default"},{default:o(()=>[a(c,{gutter:24},{default:o(()=>[a(m,{span:12},{default:o(()=>[a(s,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[a(n,{modelValue:e.dataForm.name,"onUpdate:modelValue":t[0]||(t[0]=d=>e.dataForm.name=d),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),a(m,{span:12},{default:o(()=>[a(s,{label:"\u6807\u8BC6",prop:"identification"},{default:o(()=>[a(n,{modelValue:e.dataForm.identification,"onUpdate:modelValue":t[1]||(t[1]=d=>e.dataForm.identification=d),placeholder:"\u8BF7\u8F93\u5165\u6807\u8BC6"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(c,{gutter:24},{default:o(()=>[a(m,{span:24},{default:o(()=>[a(s,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[a(n,{modelValue:e.dataForm.remark,"onUpdate:modelValue":t[2]||(t[2]=d=>e.dataForm.remark=d),type:"textarea",rows:2,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(s,{label:"\u4EE3\u7801",prop:"code"},{default:o(()=>[a(v,{class:"editor",modelValue:e.dataForm.code,"onUpdate:modelValue":t[3]||(t[3]=d=>e.dataForm.code=d),theme:"vs-dark",language:"javascript",style:{width:"100%",height:"800px",border:"1px solid #dcdfe6","border-radius":"4px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}var A=D(y,[["render",w],["__scopeId","data-v-29f9b402"],["__file","/Users/luochen/project17/taie-sword/taie-admin-vue/src/views/js-code/add-or-update.vue"]]);export{A as default};
