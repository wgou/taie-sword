import{_ as h,w as C,u as B,b as F}from"./index.c9acb6bc.js";import{e as p}from"./monacoeditor.d62c48b5.js";import{d as V,e as k,_ as S,o as U,w as f,g as M,t as $,A as D,a as N,r as d,E as a,F as o,H as g}from"./vlib.0bb5c6cc.js";import"./lodash.8cc0d8b0.js";import"./lib.aa75605a.js";function R(){return new Worker("./assets/editor.worker.e64733d1.js",{type:"module"})}const H=V({name:"vsCode",props:{modelValue:{type:String,default:""},theme:{type:String,default:"vs"},language:{type:String,default:"json"},options:Object},emits:["change","update:modelValue"],setup(e,{emit:t}){const i=k(),s=S(),_=window;return _.MonacoEnvironment={getWorker(){return new R}},U(()=>{const r=p.create(i.value,{model:p.createModel(e.modelValue,e.language),tabSize:2,automaticLayout:!0,scrollBeyondLastLine:!1,theme:e.theme,...e.options});s.value=r,r.onDidChangeModelContent(()=>{const l=r.getValue();t("update:modelValue",l),t("change",l)}),f(()=>e.modelValue,l=>{l!==r.getValue()&&r.setValue(l)}),f(()=>e.theme,l=>{p.setTheme(l)}),f(()=>e.language,l=>{p.setModelLanguage(r.getModel(),l)}),f(()=>e.options,l=>{r.updateOptions(l)})}),M(()=>{s.value&&s.value.dispose()}),{dom:i}}}),L={class:"editor",ref:"dom"};function j(e,t,i,s,_,r){return $(),D("div",L,null,512)}var q=h(H,[["render",j],["__scopeId","data-v-b11f4cb2"]]),I=C(q);const O=V({components:{MonacoEditor:I},setup(){return N({visible:!1,dataForm:{id:"",name:"",content:"",fileName:"",path:"",status:0}})},computed:{dataRule(){return{name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],fileName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}},created(){this.dataFormSubmitHandle=B(this.dataFormSubmitHandle)},methods:{init(){this.visible=!0,this.$nextTick(()=>{this.$refs.dataFormRef.resetFields(),this.dataForm.id&&this.getInfo()})},getInfo(){F.get(`/devtools/template/${this.dataForm.id}`).then(e=>{if(e.code!==0)return this.$message.error(e.msg);this.dataForm={...this.dataForm,...e.data}})},dataFormSubmitHandle(){this.$refs.dataFormRef.validate(e=>{if(!e)return!1;(this.dataForm.id?F.put:F.post)("/devtools/template",this.dataForm).then(t=>{if(t.code!==0)return this.$message.error(t.msg);this.$message({message:this.$t("prompt.success"),type:"success",duration:500,onClose:()=>{this.visible=!1,this.$emit("refreshDataList")}})})})}}}),W={class:"template-code"};function T(e,t,i,s,_,r){const l=d("el-input"),n=d("el-form-item"),m=d("el-col"),c=d("el-row"),v=d("el-radio"),A=d("el-radio-group"),E=d("monaco-editor"),w=d("el-form"),b=d("el-button"),y=d("el-dialog");return $(),D("div",W,[a(y,{modelValue:e.visible,"onUpdate:modelValue":t[7]||(t[7]=u=>e.visible=u),title:e.dataForm.id?"\u7F16\u8F91":"\u65B0\u589E","close-on-click-modal":!1,"close-on-press-escape":!1,fullscreen:!0},{footer:o(()=>[a(b,{onClick:t[5]||(t[5]=u=>e.visible=!1)},{default:o(()=>t[10]||(t[10]=[g("\u53D6\u6D88")])),_:1}),a(b,{type:"primary",onClick:t[6]||(t[6]=u=>e.dataFormSubmitHandle())},{default:o(()=>t[11]||(t[11]=[g("\u786E\u5B9A")])),_:1})]),default:o(()=>[a(w,{model:e.dataForm,rules:e.dataRule,ref:"dataFormRef","label-width":"80px",size:"small"},{default:o(()=>[a(c,{gutter:24},{default:o(()=>[a(m,{span:12},{default:o(()=>[a(n,{label:"\u6A21\u677F\u540D",prop:"name"},{default:o(()=>[a(l,{modelValue:e.dataForm.name,"onUpdate:modelValue":t[0]||(t[0]=u=>e.dataForm.name=u),placeholder:"\u6A21\u677F\u540D"},null,8,["modelValue"])]),_:1})]),_:1}),a(m,{span:12},{default:o(()=>[a(n,{label:"\u6587\u4EF6\u540D",prop:"fileName"},{default:o(()=>[a(l,{modelValue:e.dataForm.fileName,"onUpdate:modelValue":t[1]||(t[1]=u=>e.dataForm.fileName=u),placeholder:"\u6587\u4EF6\u540D"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(c,{gutter:24},{default:o(()=>[a(m,{span:12},{default:o(()=>[a(n,{label:"\u751F\u6210\u8DEF\u5F84",prop:"path"},{default:o(()=>[a(l,{modelValue:e.dataForm.path,"onUpdate:modelValue":t[2]||(t[2]=u=>e.dataForm.path=u),placeholder:"\u751F\u6210\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})]),_:1}),a(m,{span:12},{default:o(()=>[a(n,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[a(A,{modelValue:e.dataForm.status,"onUpdate:modelValue":t[3]||(t[3]=u=>e.dataForm.status=u)},{default:o(()=>[a(v,{label:0},{default:o(()=>t[8]||(t[8]=[g("\u542F\u7528")])),_:1}),a(v,{label:1},{default:o(()=>t[9]||(t[9]=[g("\u7981\u7528")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(n,{label:"\u5185\u5BB9",prop:"content"},{default:o(()=>[a(E,{class:"editor",modelValue:e.dataForm.content,"onUpdate:modelValue":t[4]||(t[4]=u=>e.dataForm.content=u),theme:"vs",language:"java",style:{width:"100%",height:"480px",border:"1px solid #ccc"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}var P=h(O,[["render",T]]);export{P as default};
