import{u as k}from"./useView.d7e741d1.js";import{_,b as w}from"./index.c9acb6bc.js";import{d as S,a as B,$ as E,r as o,y as F,t as p,A as $,E as t,F as l,H as d,O as U,z as V,u as m,f as z}from"./vlib.0bb5c6cc.js";import H from"./datasource-add-or-update.8398a126.js";import"./lodash.8cc0d8b0.js";import"./monacoeditor.d62c48b5.js";import"./lib.aa75605a.js";const h=S({components:{AddOrUpdate:H},setup(){const a=B({getDataListURL:"/devtools/datasource/page",getDataListIsPage:!0,deleteURL:"/devtools/datasource",deleteIsBatch:!0,dataForm:{connName:"",dbType:""}});return{...k(a),...E(a)}},methods:{datasourceHandle(a){w.get("/devtools/datasource/test/"+a).then(e=>e.code!==0?this.$message.error(e.msg):this.$message.success(e.data))}}}),O={class:"mod-datasource"};function N(a,e,Q,R,T,A){const c=o("el-input"),s=o("el-form-item"),i=o("el-option"),b=o("el-select"),u=o("el-button"),C=o("el-form"),r=o("el-table-column"),g=o("el-tag"),v=o("el-table"),y=o("el-pagination"),D=o("add-or-update"),L=F("loading");return p(),$("div",O,[t(C,{inline:!0,model:a.dataForm,onKeyup:e[5]||(e[5]=U(n=>a.getDataList(),["enter"]))},{default:l(()=>[t(s,null,{default:l(()=>[t(c,{modelValue:a.dataForm.connName,"onUpdate:modelValue":e[0]||(e[0]=n=>a.dataForm.connName=n),placeholder:"\u8FDE\u63A5\u540D",clearable:""},null,8,["modelValue"])]),_:1}),t(s,{prop:"dbType"},{default:l(()=>[t(b,{modelValue:a.dataForm.dbType,"onUpdate:modelValue":e[1]||(e[1]=n=>a.dataForm.dbType=n),clearable:"",placeholder:"\u6570\u636E\u5E93\u7C7B\u578B",class:"w-percent-100"},{default:l(()=>[t(i,{value:"MySQL",label:"MySQL"}),t(i,{value:"Oracle",label:"Oracle"}),t(i,{value:"SQLServer",label:"SQLServer"}),t(i,{value:"PostgreSQL",label:"PostgreSQL"}),t(i,{value:"DM",label:"DM"})]),_:1},8,["modelValue"])]),_:1}),t(s,null,{default:l(()=>[t(u,{onClick:e[2]||(e[2]=n=>a.getDataList())},{default:l(()=>e[6]||(e[6]=[d("\u67E5\u8BE2")])),_:1})]),_:1}),t(s,null,{default:l(()=>[t(u,{type:"primary",onClick:e[3]||(e[3]=n=>a.addOrUpdateHandle())},{default:l(()=>e[7]||(e[7]=[d("\u65B0\u589E")])),_:1})]),_:1}),t(s,null,{default:l(()=>[t(u,{type:"danger",onClick:e[4]||(e[4]=n=>a.deleteHandle())},{default:l(()=>e[8]||(e[8]=[d("\u5220\u9664")])),_:1})]),_:1})]),_:1},8,["model"]),V((p(),m(v,{data:a.dataList,border:"",onSelectionChange:a.dataListSelectionChangeHandle,style:{width:"100%"}},{default:l(()=>[t(r,{type:"selection","header-align":"center",align:"center",width:"50"}),t(r,{prop:"connName",label:"\u8FDE\u63A5\u540D","header-align":"center",align:"center"}),t(r,{prop:"dbType",label:"\u6570\u636E\u5E93\u7C7B\u578B","header-align":"center",align:"center"}),t(r,{prop:"connUrl","show-overflow-tooltip":"",label:"\u6570\u636E\u5E93URL",c:"","header-align":"center",align:"center"}),t(r,{prop:"username",label:"\u7528\u6237\u540D","header-align":"center",align:"center"}),t(r,{prop:"password",label:"\u5BC6\u7801","header-align":"center",align:"center"}),t(r,{prop:"status",label:"\u72B6\u6001",sortable:"custom","header-align":"center",align:"center"},{default:l(n=>[n.row.status===0?(p(),m(g,{key:0,size:"small",type:"success"},{default:l(()=>e[9]||(e[9]=[d("\u542F\u7528")])),_:1})):(p(),m(g,{key:1,size:"small",type:"danger"},{default:l(()=>e[10]||(e[10]=[d("\u7981\u7528")])),_:1}))]),_:1}),t(r,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"180"},{default:l(n=>[t(u,{type:"primary",link:"",onClick:f=>a.datasourceHandle(n.row.id)},{default:l(()=>e[11]||(e[11]=[d("\u8FDE\u63A5\u6D4B\u8BD5")])),_:2},1032,["onClick"]),t(u,{type:"primary",link:"",onClick:f=>a.addOrUpdateHandle(n.row.id)},{default:l(()=>e[12]||(e[12]=[d("\u7F16\u8F91")])),_:2},1032,["onClick"]),t(u,{type:"primary",link:"",onClick:f=>a.deleteHandle(n.row.id)},{default:l(()=>e[13]||(e[13]=[d("\u5220\u9664")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[L,a.dataListLoading]]),t(y,{"current-page":a.page,"page-sizes":[10,20,50,100],"page-size":a.limit,total:a.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:a.pageSizeChangeHandle,onCurrentChange:a.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),a.addOrUpdateVisible?(p(),m(D,{key:0,ref:"addOrUpdate",onRefreshDataList:a.getDataList},null,8,["onRefreshDataList"])):z("",!0)])}var J=_(h,[["render",N]]);export{J as default};
