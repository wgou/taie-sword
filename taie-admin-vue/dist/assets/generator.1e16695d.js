import{u as v}from"./useView.504fb702.js";import{d as V,a as F,$ as H,r as o,y as T,t as u,A as c,E as n,F as a,H as l,O as E,z as N,u as d,f as p}from"./vlib.982cfaee.js";import R from"./generator-import.3ef72aed.js";import w from"./generator-edittable.e3de1c69.js";import B from"./generator-code.42c5e113.js";import M from"./generator-menu.95e56efc.js";import{_}from"./index.8146017f.js";import"./monacoeditor.d62c48b5.js";import"./lodash.0b661716.js";import"./lib.b62e57c8.js";const z=V({components:{Import:R,EditTable:w,GeneratorCode:B,GeneratorMenu:M},setup(){const e=F({getDataListURL:"/devtools/table/page",getDataListIsPage:!0,deleteURL:"/devtools/table",deleteIsBatch:!0,importVisible:!1,editTableVisible:!1,generatorCodeVisible:!1,generatorMenuVisible:!1,dataForm:{tableName:""}});return{...v(e),...H(e)}},methods:{importHandle(){this.importVisible=!0,this.$nextTick(()=>{this.$refs.import.init()})},editTableHandle(e){this.editTableVisible=!0,this.$nextTick(()=>{this.$refs.editTable.init(e)})},generatorCodeHandle(e){this.generatorCodeVisible=!0,this.$nextTick(()=>{this.$refs.generatorCode.init(e)})},generatorMenuHandle(e){this.generatorMenuVisible=!0,this.$nextTick(()=>{this.$refs.generatorMenu.dataForm.moduleName=e.moduleName,this.$refs.generatorMenu.dataForm.className=e.className,this.$refs.generatorMenu.init()})}}}),S={class:"mod-generator"};function A(e,t,I,U,G,K){const f=o("el-input"),m=o("el-form-item"),i=o("el-button"),b=o("el-form"),s=o("el-table-column"),C=o("el-table"),k=o("el-pagination"),h=o("import"),D=o("edit-table"),$=o("generator-code"),L=o("generator-menu"),y=T("loading");return u(),c("div",S,[n(b,{inline:!0,model:e.dataForm,onKeyup:t[4]||(t[4]=E(r=>e.getDataList(),["enter"]))},{default:a(()=>[n(m,null,{default:a(()=>[n(f,{modelValue:e.dataForm.tableName,"onUpdate:modelValue":t[0]||(t[0]=r=>e.dataForm.tableName=r),placeholder:"\u8868\u540D"},null,8,["modelValue"])]),_:1}),n(m,null,{default:a(()=>[n(i,{onClick:t[1]||(t[1]=r=>e.getDataList())},{default:a(()=>t[5]||(t[5]=[l("\u67E5\u8BE2")])),_:1})]),_:1}),n(m,null,{default:a(()=>[n(i,{type:"primary",onClick:t[2]||(t[2]=r=>e.importHandle())},{default:a(()=>t[6]||(t[6]=[l("\u5BFC\u5165\u6570\u636E\u5E93\u8868")])),_:1})]),_:1}),n(m,null,{default:a(()=>[n(i,{type:"danger",onClick:t[3]||(t[3]=r=>e.deleteHandle())},{default:a(()=>t[7]||(t[7]=[l("\u5220\u9664")])),_:1})]),_:1})]),_:1},8,["model"]),N((u(),d(C,{data:e.dataList,border:"",onSelectionChange:e.dataListSelectionChangeHandle,style:{width:"100%"}},{default:a(()=>[n(s,{type:"selection","header-align":"center",align:"center",width:"50"}),n(s,{prop:"tableName",label:"\u8868\u540D","header-align":"center",align:"center"}),n(s,{prop:"tableComment",label:"\u8868\u8BF4\u660E","header-align":"center",align:"center"}),n(s,{prop:"className",label:"\u7C7B\u540D","header-align":"center",align:"center"}),n(s,{prop:"createDate",label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center"}),n(s,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"260"},{default:a(r=>[n(i,{type:"primary",link:"",onClick:g=>e.editTableHandle(r.row.id)},{default:a(()=>t[8]||(t[8]=[l("\u7F16\u8F91")])),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:g=>e.generatorCodeHandle(r.row.id)},{default:a(()=>t[9]||(t[9]=[l("\u751F\u6210\u4EE3\u7801")])),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:g=>e.generatorMenuHandle(r.row)},{default:a(()=>t[10]||(t[10]=[l("\u521B\u5EFA\u83DC\u5355")])),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:g=>e.deleteHandle(r.row.id)},{default:a(()=>t[11]||(t[11]=[l("\u5220\u9664")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[y,e.dataListLoading]]),n(k,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),e.importVisible?(u(),d(h,{key:0,ref:"import",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):p("",!0),e.editTableVisible?(u(),d(D,{key:1,ref:"editTable",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):p("",!0),e.generatorCodeVisible?(u(),d($,{key:2,ref:"generatorCode",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):p("",!0),e.generatorMenuVisible?(u(),d(L,{key:3,ref:"generatorMenu",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):p("",!0)])}var x=_(z,[["render",A]]);export{x as default};
