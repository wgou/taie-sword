import{u as L}from"./useView.7a1c979e.js";import{d as D,a as V,a0 as H,r as o,y as _,t as p,A as w,F as t,G as a,I as r,H as d,P as S,z,u,f as g}from"./vlib.611ed292.js";import U from"./mail-template-add-or-update.8cc84a0f.js";import R from"./mail-template-config.5113eb20.js";import F from"./mail-template-send.5b03c85e.js";import{_ as B}from"./index.a08d64ed.js";import"./monacoeditor.d62c48b5.js";/* empty css                   */import"./quill.942ff23b.js";import"./lodash.78aef77c.js";import"./lib.18273bf4.js";const O=D({components:{AddOrUpdate:U,Config:R,Send:F},setup(){const e=V({getDataListURL:"/sys/mailtemplate/page",getDataListIsPage:!0,deleteURL:"/sys/mailtemplate",deleteIsBatch:!0,dataForm:{name:""},configVisible:!1,sendVisible:!1});return{...L(e),...H(e)}},methods:{configHandle(){this.configVisible=!0,this.$nextTick(()=>{this.$refs.config.init()})},sendHandle(e){this.sendVisible=!0,this.$nextTick(()=>{this.$refs.send.dataForm.id=e,this.$refs.send.init()})}}}),T={class:"mod-message__mail-template"};function j(e,n,I,N,A,K){const c=o("el-input"),s=o("el-form-item"),i=o("el-button"),h=o("el-form"),m=o("el-table-column"),C=o("el-table"),$=o("el-pagination"),b=o("add-or-update"),y=o("config"),k=o("send"),v=_("loading");return p(),w("div",T,[t(h,{inline:!0,model:e.dataForm,onKeyup:n[5]||(n[5]=S(l=>e.getDataList(),["enter"]))},{default:a(()=>[t(s,null,{default:a(()=>[t(c,{modelValue:e.dataForm.name,"onUpdate:modelValue":n[0]||(n[0]=l=>e.dataForm.name=l),placeholder:e.$t("mail.name"),clearable:""},null,8,["modelValue","placeholder"])]),_:1}),t(s,null,{default:a(()=>[t(i,{onClick:n[1]||(n[1]=l=>e.getDataList())},{default:a(()=>[r(d(e.$t("query")),1)]),_:1})]),_:1}),t(s,null,{default:a(()=>[t(i,{type:"primary",onClick:n[2]||(n[2]=l=>e.addOrUpdateHandle())},{default:a(()=>[r(d(e.$t("add")),1)]),_:1})]),_:1}),t(s,null,{default:a(()=>[t(i,{type:"primary",onClick:n[3]||(n[3]=l=>e.configHandle())},{default:a(()=>[r(d(e.$t("mail.config")),1)]),_:1})]),_:1}),t(s,null,{default:a(()=>[t(i,{type:"danger",onClick:n[4]||(n[4]=l=>e.deleteHandle())},{default:a(()=>[r(d(e.$t("deleteBatch")),1)]),_:1})]),_:1})]),_:1},8,["model"]),z((p(),u(C,{data:e.dataList,border:"",onSelectionChange:e.dataListSelectionChangeHandle,onSortChange:e.dataListSortChangeHandle,style:{width:"100%"}},{default:a(()=>[t(m,{type:"selection","header-align":"center",align:"center",width:"50"}),t(m,{prop:"name",label:e.$t("mail.name"),"header-align":"center",align:"center"},null,8,["label"]),t(m,{prop:"subject",label:e.$t("mail.subject"),"header-align":"center",align:"center"},null,8,["label"]),t(m,{prop:"createDate",label:e.$t("mail.createDate"),sortable:"custom","header-align":"center",align:"center",width:"180"},null,8,["label"]),t(m,{label:e.$t("handle"),fixed:"right","header-align":"center",align:"center",width:"180"},{default:a(l=>[t(i,{type:"primary",link:"",onClick:f=>e.addOrUpdateHandle(l.row.id)},{default:a(()=>[r(d(e.$t("update")),1)]),_:2},1032,["onClick"]),t(i,{type:"primary",link:"",onClick:f=>e.sendHandle(l.row.id)},{default:a(()=>[r(d(e.$t("mail.send")),1)]),_:2},1032,["onClick"]),t(i,{type:"primary",link:"",onClick:f=>e.deleteHandle(l.row.id)},{default:a(()=>[r(d(e.$t("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","onSelectionChange","onSortChange"])),[[v,e.dataListLoading]]),t($,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),e.addOrUpdateVisible?(p(),u(b,{key:0,ref:"addOrUpdate",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):g("",!0),e.configVisible?(p(),u(y,{key:1,ref:"config"},null,512)):g("",!0),e.sendVisible?(p(),u(k,{key:2,ref:"send",onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])):g("",!0)])}var x=B(O,[["render",j]]);export{x as default};
