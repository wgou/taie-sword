import{d as b,a as v,r,t as F,u as h,F as o,E as t,H as u,G as p,O as V}from"./vlib.0bb5c6cc.js";import{_ as g,u as C,b as T,l as y}from"./index.6b1e63f3.js";import"./monacoeditor.d62c48b5.js";import"./lodash.8cc0d8b0.js";import"./lib.aa75605a.js";const S=b({setup(){return v({visible:!1,dataForm:{id:"",mailTo:"",mailCc:"",params:""}})},computed:{dataRule(){var e=(a,d,i)=>{if(!y(d))return i(new Error(this.$t("validate.format",{attr:this.$t("user.email")})));i()};return{mailTo:[{required:!0,message:this.$t("validate.required"),trigger:"blur"},{validator:e,trigger:"blur"}]}}},created(){this.dataFormSubmitHandle=C(this.dataFormSubmitHandle)},methods:{init(){this.visible=!0,this.$nextTick(()=>{this.$refs.dataFormRef.resetFields()})},dataFormSubmitHandle(){this.$refs.dataFormRef.validate(e=>{if(!e)return!1;T.post("/sys/mailtemplate/send",this.dataForm,{"content-type":"application/x-www-form-urlencoded"}).then(a=>{if(a.code!==0)return this.$message.error(a.msg);this.$message({message:this.$t("prompt.success"),type:"success",duration:500,onClose:()=>{this.visible=!1,this.$emit("refreshDataList")}})})})}}});function c(e,a,d,i,w,H){const s=r("el-input"),m=r("el-form-item"),f=r("el-form"),n=r("el-button"),$=r("el-dialog");return F(),h($,{modelValue:e.visible,"onUpdate:modelValue":a[6]||(a[6]=l=>e.visible=l),title:e.$t("mail.send"),"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:o(()=>[t(n,{onClick:a[4]||(a[4]=l=>e.visible=!1)},{default:o(()=>[u(p(e.$t("cancel")),1)]),_:1}),t(n,{type:"primary",onClick:a[5]||(a[5]=l=>e.dataFormSubmitHandle())},{default:o(()=>[u(p(e.$t("confirm")),1)]),_:1})]),default:o(()=>[t(f,{model:e.dataForm,rules:e.dataRule,ref:"dataFormRef",onKeyup:a[3]||(a[3]=V(l=>e.dataFormSubmitHandle(),["enter"])),"label-width":"120px"},{default:o(()=>[t(m,{prop:"mailTo",label:e.$t("mail.mailTo")},{default:o(()=>[t(s,{modelValue:e.dataForm.mailTo,"onUpdate:modelValue":a[0]||(a[0]=l=>e.dataForm.mailTo=l),placeholder:e.$t("mail.mailTo")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{prop:"mailCc",label:e.$t("mail.mailCc")},{default:o(()=>[t(s,{modelValue:e.dataForm.mailCc,"onUpdate:modelValue":a[1]||(a[1]=l=>e.dataForm.mailCc=l),placeholder:e.$t("mail.mailCc")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(m,{prop:"params",label:e.$t("mail.params")},{default:o(()=>[t(s,{modelValue:e.dataForm.params,"onUpdate:modelValue":a[2]||(a[2]=l=>e.dataForm.params=l),placeholder:e.$t("mail.paramsTips")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}var q=g(S,[["render",c]]);export{q as default};
