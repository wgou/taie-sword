import{u as w}from"./useView.d7e741d1.js";import{d as f,R as P,a as $,$ as b,u as F,F as s,O as g,r as d,t as h,E as r,B as c,G as m,H as V}from"./vlib.0bb5c6cc.js";import{_ as v,u as y,b as S}from"./index.c9acb6bc.js";import"./monacoeditor.d62c48b5.js";import"./lodash.8cc0d8b0.js";import"./lib.aa75605a.js";const C=f({setup(){const e=P(),a=$({user:e.state.user,dataForm:{password:"",newPassword:"",confirmPassword:""}});return{...w(a),...b(a)}},created(){this.dataFormSubmitHandle=y(this.dataFormSubmitHandle)},computed:{dataRule(){const e=(a,n,l)=>{if(this.dataForm.newPassword!==n)return l(new Error(this.$t("updatePassword.validate.confirmPassword")));l()};return{password:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],newPassword:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],confirmPassword:[{required:!0,message:this.$t("validate.required"),trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{dataFormSubmitHandle(){this.$refs.dataFormRef.validate(e=>{if(!e)return!1;S.put("/sys/user/password",this.dataForm).then(a=>{if(a.code!==0)return this.$message.error(a.msg);this.$message({message:this.$t("prompt.success"),type:"success",duration:500,onClose:()=>{this.$router.replace("/login")}})})})}}});function q(e,a,n,l,H,R){const t=d("el-form-item"),u=d("el-input"),i=d("el-button"),p=d("el-form");return h(),F(p,{model:e.dataForm,rules:e.dataRule,ref:"dataFormRef",onKeyup:a[3]||(a[3]=g(o=>e.dataFormSubmitHandle(),["enter"])),"label-width":"120px"},{default:s(()=>[r(t,{label:e.$t("updatePassword.username")},{default:s(()=>[c("span",null,m(e.user.username),1)]),_:1},8,["label"]),r(t,{prop:"password",label:e.$t("updatePassword.password")},{default:s(()=>[r(u,{modelValue:e.dataForm.password,"onUpdate:modelValue":a[0]||(a[0]=o=>e.dataForm.password=o),type:"password",placeholder:e.$t("updatePassword.password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(t,{prop:"newPassword",label:e.$t("updatePassword.newPassword")},{default:s(()=>[r(u,{modelValue:e.dataForm.newPassword,"onUpdate:modelValue":a[1]||(a[1]=o=>e.dataForm.newPassword=o),type:"password",placeholder:e.$t("updatePassword.newPassword")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(t,{prop:"confirmPassword",label:e.$t("updatePassword.confirmPassword")},{default:s(()=>[r(u,{modelValue:e.dataForm.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=o=>e.dataForm.confirmPassword=o),type:"password",placeholder:e.$t("updatePassword.confirmPassword")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(t,null,{default:s(()=>[r(i,{type:"primary",onClick:e.dataFormSubmitHandle},{default:s(()=>[V(m(e.$t("confirm")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])}var K=v(C,[["render",q]]);export{K as default};
