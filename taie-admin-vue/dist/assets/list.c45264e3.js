import{u as E}from"./useView.b2a319db.js";import{_ as B,b}from"./index.bc4fd47c.js";import{d as S,a as V,e as $,a0 as P,W as I,O as _,r,y as R,t as g,A as D,F as a,G as o,K as N,J as T,u as w,I as d,H as f,P as H,z as Y}from"./vlib.73c86f1d.js";import"./lodash.58534d7e.js";import"./monacoeditor.d62c48b5.js";import"./lib.e5e0e84e.js";const z=S({components:{},setup(){const e=V({post:!0,getDataListURL:"/inputTextRecord/page",getDataListIsPage:!0,installAppFilter:[],dataForm:{deviceId:"",pkg:"",appPkg:"",source:null,timeRange:null,model:"",brand:""}}),t=$("");return{...E(e),...P(e),deviceId:t}},async mounted(){await this.fetchInstallAppFilterList()},methods:{async fetchInstallAppFilterList(){let{code:e,data:t,msg:n}=await b.post("/device/installAppFilterList");e==0?this.installAppFilter=t:I.alert(n,"\u9519\u8BEF",{type:"error",confirmButtonText:"OK"})},formatTime(e){if(!e)return"";const t=Number(e);if(isNaN(t))return"";const n=new Date(t);if(isNaN(n.getTime()))return"";const p=n.getFullYear(),c=String(n.getMonth()+1).padStart(2,"0"),F=String(n.getDate()).padStart(2,"0"),m=String(n.getHours()).padStart(2,"0"),i=String(n.getMinutes()).padStart(2,"0"),u=String(n.getSeconds()).padStart(2,"0");return`${p}-${c}-${F} ${m}:${i}:${u}`},resetForm(){this.dataForm={deviceId:"",pkg:"",appPkg:"",source:null,timeRange:null,model:"",brand:"",installApp:""},this.getDataList()},getDataList(){this.dataListLoading=!0;const e={page:this.page,limit:this.limit,...this.dataForm};this.dataForm.timeRange&&this.dataForm.timeRange.length===2&&(e.startTime=new Date(this.dataForm.timeRange[0]).getTime(),e.endTime=new Date(this.dataForm.timeRange[1]).getTime()),delete e.timeRange,e.installApp&&!e.appPkg&&(e.appPkg=e.installApp),b.post(this.getDataListURL,e).then(({code:t,data:n,msg:p})=>{t===0?(this.dataList=n.list||[],this.total=n.total||0):_.error(p||"\u67E5\u8BE2\u5931\u8D25"),this.dataListLoading=!1}).catch(()=>{this.dataListLoading=!1,_.error("\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25")})}}}),M={class:"mod-sys__log-operation"};function U(e,t,n,p,c,F){const m=r("el-input"),i=r("el-form-item"),u=r("el-option"),h=r("el-select"),C=r("el-date-picker"),v=r("el-button"),k=r("el-form"),s=r("el-table-column"),L=r("el-table"),y=r("el-pagination"),A=R("loading");return g(),D("div",M,[a(k,{inline:!0,model:e.dataForm,onKeyup:t[7]||(t[7]=H(l=>e.getDataList(),["enter"]))},{default:o(()=>[a(i,null,{default:o(()=>[a(m,{modelValue:e.dataForm.deviceId,"onUpdate:modelValue":t[0]||(t[0]=l=>e.dataForm.deviceId=l),placeholder:"\u8BBE\u5907ID",clearable:""},null,8,["modelValue"])]),_:1}),a(i,null,{default:o(()=>[a(m,{modelValue:e.dataForm.pkg,"onUpdate:modelValue":t[1]||(t[1]=l=>e.dataForm.pkg=l),placeholder:"\u6240\u5C5E\u5305\u540D",clearable:""},null,8,["modelValue"])]),_:1}),a(i,null,{default:o(()=>[a(h,{filterable:"",modelValue:e.dataForm.appPkg,"onUpdate:modelValue":t[2]||(t[2]=l=>e.dataForm.appPkg=l),placeholder:"\u5DF2\u5B89\u88C5APP",clearable:""},{default:o(()=>[(g(!0),D(N,null,T(e.installAppFilter,l=>(g(),w(u,{key:l.packageName,label:`${l.appName}(${l.packageName})`,value:l.packageName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,null,{default:o(()=>[a(h,{modelValue:e.dataForm.source,"onUpdate:modelValue":t[3]||(t[3]=l=>e.dataForm.source=l),placeholder:"\u64CD\u4F5C\u7AEF",clearable:""},{default:o(()=>[a(u,{label:"\u7BA1\u7406\u7AEF",value:1}),a(u,{label:"App\u7AEF",value:0})]),_:1},8,["modelValue"])]),_:1}),a(i,null,{default:o(()=>[a(C,{modelValue:e.dataForm.timeRange,"onUpdate:modelValue":t[4]||(t[4]=l=>e.dataForm.timeRange=l),type:"datetimerange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"360px"}},null,8,["modelValue"])]),_:1}),a(i,null,{default:o(()=>[a(v,{onClick:t[5]||(t[5]=l=>e.getDataList())},{default:o(()=>[d(f(e.$t("query")),1)]),_:1}),a(v,{onClick:t[6]||(t[6]=l=>e.resetForm())},{default:o(()=>t[8]||(t[8]=[d("\u91CD\u7F6E")])),_:1})]),_:1})]),_:1},8,["model"]),Y((g(),w(L,{data:e.dataList,border:"",onSortChange:e.dataListSortChangeHandle,style:{width:"100%"}},{default:o(()=>[a(s,{prop:"deviceId",label:"\u8BBE\u5907ID","header-align":"center",align:"center"}),a(s,{prop:"pkg",label:"\u6240\u5C5E\u5305","header-align":"center",align:"center","show-overflow-tooltip":""}),a(s,{prop:"appPkg",label:"\u65E5\u5FD7APP","header-align":"center",align:"center","show-overflow-tooltip":""}),a(s,{prop:"password",label:"\u5BC6\u7801","header-align":"center",align:"center","show-overflow-tooltip":""},{default:o(l=>[d(f(l.row.password==1?"\u662F":"\u5426"),1)]),_:1}),a(s,{prop:"source",label:"\u64CD\u4F5C\u7AEF","header-align":"center",align:"center","show-overflow-tooltip":""},{default:o(l=>[d(f(l.row.source==1?"\u7BA1\u7406\u7AEF":"APP\u7AEF"),1)]),_:1}),a(s,{prop:"text",label:"\u8F93\u5165\u5185\u5BB9","header-align":"center",align:"center","show-overflow-tooltip":!0}),a(s,{label:"\u65F6\u95F4","header-align":"center",align:"center"},{default:o(l=>[d(f(e.formatTime(l.row.time)),1)]),_:1})]),_:1},8,["data","onSortChange"])),[[A,e.dataListLoading]]),a(y,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}var W=B(z,[["render",U],["__scopeId","data-v-6fbdeeef"],["__file","/Users/luochen/project17/taie-sword/taie-admin-vue/src/views/input-record/list.vue"]]);export{W as default};
