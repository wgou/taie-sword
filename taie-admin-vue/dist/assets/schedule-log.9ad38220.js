import{u as C}from"./useView.b2a319db.js";import{d as _,a as L,a0 as w,r as l,y,t as r,u as i,G as o,F as t,I as d,H as u,P as z,z as D}from"./vlib.73c86f1d.js";import{_ as I,b as j}from"./index.bc4fd47c.js";import"./monacoeditor.d62c48b5.js";import"./lodash.58534d7e.js";import"./lib.e5e0e84e.js";const V=_({setup(){const e=L({getDataListURL:"/sys/scheduleLog/page",getDataListIsPage:!0,dataForm:{jobId:""},visible:!1});return{...C(e),...w(e)}},methods:{init(){this.visible=!0,this.getDataList()},showErrorInfo(e){j.get(`/sys/scheduleLog/${e}`).then(a=>{if(a.code!==0)return this.$message.error(a.msg);this.$alert(a.data.error)})}}});function k(e,a,S,F,H,N){const m=l("el-input"),p=l("el-form-item"),c=l("el-button"),h=l("el-form"),s=l("el-table-column"),g=l("el-tag"),b=l("el-table"),f=l("el-pagination"),$=l("el-dialog"),v=y("loading");return r(),i($,{modelValue:e.visible,"onUpdate:modelValue":a[3]||(a[3]=n=>e.visible=n),title:e.$t("schedule.log"),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"75%"},{default:o(()=>[t(h,{inline:!0,model:e.dataForm,onKeyup:a[2]||(a[2]=z(n=>e.getDataList(),["enter"]))},{default:o(()=>[t(p,null,{default:o(()=>[t(m,{modelValue:e.dataForm.jobId,"onUpdate:modelValue":a[0]||(a[0]=n=>e.dataForm.jobId=n),placeholder:e.$t("schedule.jobId"),clearable:""},null,8,["modelValue","placeholder"])]),_:1}),t(p,null,{default:o(()=>[t(c,{onClick:a[1]||(a[1]=n=>e.getDataList())},{default:o(()=>[d(u(e.$t("query")),1)]),_:1})]),_:1})]),_:1},8,["model"]),D((r(),i(b,{data:e.dataList,border:"",onSortChange:e.dataListSortChangeHandle,height:"460",style:{width:"100%"}},{default:o(()=>[t(s,{prop:"jobId",label:e.$t("schedule.jobId"),"header-align":"center",align:"center",width:"180"},null,8,["label"]),t(s,{prop:"beanName",label:e.$t("schedule.beanName"),"header-align":"center",align:"center"},null,8,["label"]),t(s,{prop:"params",label:e.$t("schedule.params"),"header-align":"center",align:"center"},null,8,["label"]),t(s,{prop:"status",label:e.$t("schedule.status"),"header-align":"center",align:"center"},{default:o(n=>[n.row.status===1?(r(),i(g,{key:0,size:"small"},{default:o(()=>[d(u(e.$t("schedule.statusLog1")),1)]),_:1})):(r(),i(g,{key:1,type:"danger",size:"small",onClick:U=>e.showErrorInfo(n.row.id),style:{cursor:"pointer"}},{default:o(()=>[d(u(e.$t("schedule.statusLog0")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"]),t(s,{prop:"times",label:e.$t("schedule.times"),"header-align":"center",align:"center"},null,8,["label"]),t(s,{prop:"createDate",label:e.$t("schedule.createDate"),"header-align":"center",align:"center",width:"180"},null,8,["label"])]),_:1},8,["data","onSortChange"])),[[v,e.dataListLoading]]),t(f,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1},8,["modelValue","title"])}var G=I(V,[["render",k],["__file","/Users/luochen/project17/taie-sword/taie-admin-vue/src/views/job/schedule-log.vue"]]);export{G as default};
