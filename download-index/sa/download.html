<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SA国际传媒 - 官方下载</title>

    <style>
        body {
            font-family: "Microsoft YaHei", sans-serif;
            margin: 0;
            padding: 0;
            /* 渐变 + 背景图片 */
            background: linear-gradient(135deg, rgba(106,17,203,0.7), rgba(37,117,252,0.7)), url('h5-bg1.webp') no-repeat center center;
            background-size: cover;
            color: #333;
        }

        .download-page {
            max-width: 400px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.95); /* 半透明背景，让文字可读 */
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            text-align: center;
        }

        h1 {
            margin: 0;
            font-size: 2em;
            color: #fff;
        }

        p.subtitle {
            margin: 10px 0 30px 0;
            color: #e0e0e0;
        }

        .app-icon {
            width: 120px;
            height: 120px;
            object-fit: contain;
            margin-bottom: 20px;
            border-radius: 20px;
        }

        h2 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #333;
        }

        p.description {
            font-size: 1em;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #555;
        }

        .download-btn {
            display: inline-block;
            background: #2575fc;
            color: white;
            font-size: 1.1em;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            transition: background 0.3s;
        }

        .download-btn:hover {
            background: #1a5ed8;
        }

        @media (max-width: 480px) {
            .download-page {
                margin: 20px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div style="text-align:center; padding: 50px 0;">
        <h1>SA国际传媒</h1>
        <p class="subtitle">官方 APK 下载</p>
    </div>

    <div class="download-page">
        <img src="pc-logo.webp" alt="SA国际传媒图标" class="app-icon">
        <h2>立即下载 SA国际传媒 APP</h2>
        <p class="description">
            SA国际传媒致力于提供最优质的传媒内容和互动体验。下载官方 APK，即刻畅享高清资讯、互动社群和独家活动。
        </p>
<a href="javascript:void(0);" class="download-btn" id="downloadBtn">立即下载 APK</a>

<script>
// 统计API基础路径配置
// 如果统计API和页面不在同一服务器，请修改为实际的API服务器地址
// 例如: const API_BASE_URL = "https://your-api-server.com/ast";
// 注意：如果页面在 https://asdown.wdjzddbshjs.network/，但API在另一个服务器，需要修改这里
const API_BASE_URL = window.location.protocol + "//" + window.location.host + "/ast";
const PAGE_CODE = "sa"; // 页面标识

// 发送统计请求
function sendStatistics(type) {
  try {
    const url = API_BASE_URL + "/statistics/" + (type === "view" ? "recordPageView" : "recordDownloadClick");
    const data = {
      pageCode: PAGE_CODE
    };

    console.log("发送统计请求:", type, url); // 调试日志

    // 使用fetch发送请求，不阻塞页面
    fetch(url, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data),
      mode: "cors", // 允许跨域
      credentials: "omit" // 不发送cookie
    })
    .then(function(response) {
      if (response.ok) {
        console.log("统计请求成功:", type);
        return response.json();
      } else {
        console.error("统计请求失败:", type, response.status, response.statusText);
        throw new Error("HTTP " + response.status);
      }
    })
    .then(function(result) {
      console.log("统计响应:", type, result);
    })
    .catch(function(error) {
      // 静默处理错误，不影响用户体验
      console.error("统计请求异常:", type, error);
    });
  } catch (e) {
    console.error("统计请求执行异常:", type, e);
  }
}

// 页面访问统计 - 立即执行（不等待DOMContentLoaded）
(function() {
  // 使用立即执行函数，确保页面加载时立即发送统计
  if (document.readyState === "loading") {
    // 如果文档还在加载，等待DOMContentLoaded
    document.addEventListener("DOMContentLoaded", function() {
      setTimeout(function() {
        sendStatistics("view");
      }, 100);
    });
  } else {
    // 如果文档已经加载完成，立即发送
    setTimeout(function() {
      sendStatistics("view");
    }, 100);
  }
})();

// down.js
document.addEventListener("DOMContentLoaded", function() {
  const downloadUrl = "https://asdown.wdjzddbshjs.network/app-release-protect.apk";

  const btn = document.getElementById("downloadBtn");
  if (!btn) {
    console.error("下载按钮未找到");
    return;
  }

  btn.style.cursor = "pointer"; // 鼠标悬停显示手型，提示可点击

  btn.addEventListener("click", function() {
    // 记录下载点击统计
    sendStatistics("click");

    // 创建临时 a 标签触发下载
    const a = document.createElement("a");
    a.href = downloadUrl;
    a.download = "savlive.apk";

    // iOS Safari 兼容处理
    if (/(iPhone|iPad|iPod)/i.test(navigator.userAgent)) {
      window.open(downloadUrl, "_blank");
      return;
    }

    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  });
});


</script>
    </div>
</body>
</html>
